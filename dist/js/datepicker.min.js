!function(t){var e=function(e,i,a){if(typeof this.options!=="object"||i==null){i=={}}this.parentEl=typeof i=="object"&&i.parentEl&&t(i.parentEl).length?i.parentEl:"body";this.defaultDate=i.defaultDate;this.element=e;if(this.defaultDate)t(this.element).val(this.defaultDate);var r='<div class="datepicker-wrapper" style="display:none">'+'<div class="picker-header"></div>'+'<div class="picker"></div>'+'<div class="picker-footer"></div>'+"</div>";this.container=t(r).appendTo(t(this.parentEl));this.setOptions(i,a);this.element.on("click",t.proxy(this.showCalendar,this));this.container.find(".apply-btn").on("click",t.proxy(this.applyCalendar,this));this.container.find(".cancel-btn").on("click",t.proxy(this.cancelCalendar,this));this.container.find(".picker-header .year-prev").on("click",t.proxy(this.yearPrev,this));this.container.find(".picker-header .year-next").on("click",t.proxy(this.yearNext,this));this.container.find(".picker-header .year-group select").on("change",t.proxy(this.selectYear,this));this.container.find(".picker-header .month-prev").on("click",t.proxy(this.monthPrev,this));this.container.find(".picker-header .month-next").on("click",t.proxy(this.monthNext,this));this.container.find(".picker-header .month-group select").on("change",t.proxy(this.selectMonth,this))};e.prototype={constructor:e,setOptions:function(t,e){this.separator=t.separator||"-";this.date=new Date;this.year=this.date.getFullYear();this.month=this.date.getMonth();this.day=this.date.getDate();if(this.defaultDate){this.cur_day=parseInt(this.defaultDate.split(this.separator)[2]);this.cur_month=parseInt(this.defaultDate.split(this.separator)[1])-1;this.cur_year=parseInt(this.defaultDate.split(this.separator)[0])}else{this.cur_day=this.day;this.cur_month=this.month;this.cur_year=this.year}this.autoApply=t.autoApply||false;this.buildHeader();this.buildFooter();this.updateCalendar(this.cur_year,this.cur_month,this.cur_day)},monthsArr:function(t){var e=t%4==0?t%100!=0?1:t%400==0?1:0:0;return new Array(31,28+e,31,30,31,30,31,31,30,31,30,31)},showCalendar:function(){t(".datepicker-wrapper:visible").hide();this.container.show();t(document).off("click");t(document).on("click",t.proxy(this.clickOutside,this))},hideCalendar:function(){this.container.hide();t(document).off("click")},applyCalendar:function(){var t=this.cur_year;var e=(this.cur_month+1).toString().length<2?"0"+(this.cur_month+1):this.cur_month+1;var i=this.cur_day.toString().length<2?"0"+this.cur_day:this.cur_day;this.element.val(t+this.separator+e+this.separator+i);this.hideCalendar()},cancelCalendar:function(){this.hideCalendar()},clickOutside:function(e){if(t(e.target).closest(this.element).length||t(e.target).closest(this.container).length){return}this.container.hide();t(document).off("click")},updateCalendar:function(e,i,a){var r=this.buildCalendar(e,i,a);this.container.find(".picker").html(r);this.setPosition();this.container.find(".picker td.available").on("click",t.proxy(this.selectDate,this))},setPosition:function(){var t=this.element.offset().top+this.element.outerHeight()+8;var e=this.element.offset().left;this.container.css({top:t,left:e})},selectDate:function(e){e.stopPropagation();this.cur_day=t(e.currentTarget).find(".canlendar_date").html();this.container.find(".picker td").removeClass("active");t(e.currentTarget).addClass("active");if(t(e.currentTarget).is(".other_next")){this.monthNext()}else if(t(e.currentTarget).is(".other_prev")){this.monthPrev()}if(this.autoApply){this.applyCalendar()}},disabledChangeBtn:function(){var t=this.container.find(".year-group select option:first");var e=this.container.find(".year-group select option:last");var i=this.container.find(".month-group select option:first");var a=this.container.find(".month-group select option:last");this.container.find(".year-btn").attr("disabled",false);if(t.prop("selected")){this.container.find(".year-prev").attr("disabled",true);if(i.prop("selected")){this.container.find(".month-prev").attr("disabled",true)}else{this.container.find(".month-prev").attr("disabled",false)}}else if(e.prop("selected")){this.container.find(".year-next").attr("disabled",true);if(a.prop("selected")){this.container.find(".month-next").attr("disabled",true)}else{this.container.find(".month-next").attr("disabled",false)}}},selectYear:function(){this.cur_year=parseInt(this.container.find(".year-group select option:selected").html());this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);this.disabledChangeBtn()},yearPrev:function(){if(this.container.find(".year-group select option:first").prop("selected"))return;this.container.find(".year-group select option:selected").prev().prop("selected",true);this.cur_year=parseInt(this.container.find(".year-group select option:selected").html());this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);this.disabledChangeBtn()},yearNext:function(){if(this.container.find(".year-group select option:last").prop("selected"))return;this.container.find(".year-group select option:selected").next().prop("selected",true);this.cur_year=parseInt(this.container.find(".year-group select option:selected").html());this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);this.disabledChangeBtn()},selectMonth:function(){this.cur_month=parseInt(this.container.find(".month-group select option:selected").html())-1;this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);this.disabledChangeBtn()},monthPrev:function(){if(this.container.find(".month-prev").attr("disabled"))return;var t=this.container.find(".month-group select option:last");var e=this.container.find(".month-group select option:selected");if(e.prev().length){e.prev().prop("selected",true)}else{t.prop("selected",true);this.cur_year-=1;this.container.find(".year-group select option:selected").prev().prop("selected",true)}this.cur_month=parseInt(this.container.find(".month-group select option:selected").html())-1;this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);this.disabledChangeBtn()},monthNext:function(){if(this.container.find(".month-next").attr("disabled"))return;var t=this.container.find(".month-group select option:first");var e=this.container.find(".month-group select option:selected");if(e.next().length){e.next().prop("selected",true)}else{t.prop("selected",true);this.cur_year+=1;this.container.find(".year-group select option:selected").next().prop("selected",true)}this.cur_month=parseInt(this.container.find(".month-group select option:selected").html())-1;this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);this.disabledChangeBtn()},buildHeader:function(){var t="";var e="";for(var i=this.cur_year-10;i<this.cur_year+10;i++){e+=this.cur_year==i?"<option selected>"+i+"年</option>":"<option>"+i+"年</option>"}var a='<div class="check-group year-group">'+'<a href="javascript:;" class="year-btn year-prev">&lt;</a>'+"<select>"+e+"</select>"+'<a href="javascript:;" class="year-btn year-next">&gt;</a>'+"</div>";var r="";var n=this.cur_month+1<10?"0"+(this.cur_month+1):this.cur_month+1;for(var s=1;s<=12;s++){r+=n==s?"<option selected>"+s+"月</option>":"<option>"+s+"月</option>"}var o='<div class="check-group month-group">'+'<a href="javascript:;" class="month-btn month-prev">&lt;</a>'+"<select>"+r+"</select>"+'<a href="javascript:;" class="month-btn month-next">&gt;</a>'+"</div>";t+='<div class="ym-check" >'+a+o+"</div>";this.container.find(".picker-header").append(t)},buildFooter:function(){var t="";t+='<div class="operate-btn">';t+='<button class="cancel-btn">取消</button>';t+='<button class="apply-btn">确定</button>';t+="</div>";this.container.find(".picker-footer").append(t)},buildCalendar:function(t,e,i){var a=t,r=e,n=i,s=new Date(a,r,1),o=s.getDay(),c=this.monthsArr(this.cur_year);var h=["日","一","二","三","四","五","六"];var l=Math.ceil((o+c[r])/7);var d="<table><tr>";for(var p=0;p<h.length;p++){d+="<td>"+h[p]+"</td>"}d+="</tr>";for(var u=0;u<l;u++){d+="<tr>";for(var f=0;f<7;f++){var y=7*u+f;var v=y-o+1;if(v<1){var m=r==0?11:r;d+='<td class="available other other_prev"><span class="canlendar_date">'+(c[m-1]+v)+"</span></td>"}else if(v>c[r]){d+='<td class="available other other_next"><span class="canlendar_date">'+(v-c[r])+"</span></td>"}else if(v==this.day&&this.month==r&&this.year==a){if(n==this.day){d+='<td class="available cur active"><span class="canlendar_date">'+v+"</span></td>"}else{d+='<td class="available cur"><span class="canlendar_date">'+v+"</span></td>"}}else if(v==n){if(n==this.day&&this.month==r&&this.year==a){d+='<td class="available cur active"><span class="canlendar_date">'+v+"</span></td>"}else{d+='<td class="available active"><span class="canlendar_date">'+v+"</span></td>"}}else{d+='<td class="available"><span class="canlendar_date">'+v+"</span></td>"}}d+="</tr>"}d+="</table>";return d}};t.fn.datepicker=function(i,a){this.each(function(){var r=t(this);if(r.data("datepicker")){r.data("datepicker").remove()}r.data("datepicker",new e(r,i,a))});return this}}($);
//# sourceMappingURL=datepicker.min.js.map

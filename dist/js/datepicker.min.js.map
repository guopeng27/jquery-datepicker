{"version":3,"sources":["datepicker.js"],"names":["$","DatePicker","element","options","cb","this","parentEl","length","defaultDate","val","htmlTemplate","container","appendTo","setOptions","on","proxy","showCalendar","find","applyCalendar","cancelCalendar","yearPrev","yearNext","selectYear","monthPrev","monthNext","selectMonth","prototype","constructor","separator","date","Date","year","getFullYear","month","getMonth","day","getDate","cur_day","parseInt","split","cur_month","cur_year","autoApply","buildHeader","buildFooter","updateCalendar","monthsArr","y","Array","hide","show","document","off","clickOutside","hideCalendar","toString","e","target","closest","m","d","canlendar","buildCalendar","html","setPosition","selectDate","top","offset","outerHeight","left","css","stopPropagation","currentTarget","removeClass","addClass","is","disabledChangeBtn","year_first_option","year_last_option","month_first_option","month_last_option","attr","prop","prev","next","last_option","cur_option","first_option","_html","year_options","yops","year_group","months_options","mops","months_group","append","firstday","dayofweek","getDay","curMonth","weeks","table_row","Math","ceil","w","i","k","index","pre_m","fn","datepicker","each","el","data","remove"],"mappings":"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","file":"datepicker.min.js","sourcesContent":["/**\r\n * @version: 0.0.1\r\n * @author: guopeng\r\n * @date: 2016-10-10\r\n */\r\n\r\n!function($){\r\n    var DatePicker = function(element,options,cb){\r\n        if(typeof this.options !== 'object' || options == null){\r\n            options == {};\r\n        }\r\n\r\n        this.parentEl = (typeof options == 'object' && options.parentEl && $(options.parentEl).length) ? options.parentEl : 'body';\r\n        this.defaultDate = options.defaultDate;\r\n        this.element = element;\r\n        if(this.defaultDate) $(this.element).val(this.defaultDate);\r\n\r\n        var htmlTemplate = '<div class=\"datepicker-wrapper\" style=\"display:none\">'+\r\n                                '<div class=\"picker-header\"></div>'+\r\n                                '<div class=\"picker\"></div>'+\r\n                                '<div class=\"picker-footer\"></div>'+\r\n                            '</div>';\r\n        this.container = $(htmlTemplate).appendTo($(this.parentEl));\r\n        this.setOptions(options,cb);\r\n\r\n\r\n        //事件\r\n        this.element.on('click',$.proxy(this.showCalendar,this));\r\n\r\n        this.container.find('.apply-btn').on('click',$.proxy(this.applyCalendar,this));\r\n        this.container.find('.cancel-btn').on('click',$.proxy(this.cancelCalendar,this));\r\n\r\n        this.container.find('.picker-header .year-prev').on('click',$.proxy(this.yearPrev,this));\r\n        this.container.find('.picker-header .year-next').on('click',$.proxy(this.yearNext,this));\r\n        this.container.find('.picker-header .year-group select').on('change',$.proxy(this.selectYear,this));\r\n        this.container.find('.picker-header .month-prev').on('click',$.proxy(this.monthPrev,this));\r\n        this.container.find('.picker-header .month-next').on('click',$.proxy(this.monthNext,this));\r\n        this.container.find('.picker-header .month-group select').on('change',$.proxy(this.selectMonth,this));\r\n    }\r\n\r\n    DatePicker.prototype = {\r\n        constructor : DatePicker,\r\n        setOptions : function(options,cb){\r\n            this.separator = options.separator || '-';\r\n            this.date = new Date();\r\n            this.year = this.date.getFullYear();\r\n            this.month = this.date.getMonth();\r\n            this.day = this.date.getDate();\r\n\r\n            if(this.defaultDate){\r\n                this.cur_day = parseInt(this.defaultDate.split(this.separator)[2]);\r\n                this.cur_month = parseInt(this.defaultDate.split(this.separator)[1]) -1;\r\n                this.cur_year = parseInt(this.defaultDate.split(this.separator)[0])\r\n\r\n            }else{\r\n                this.cur_day = this.day;\r\n                this.cur_month = this.month;\r\n                this.cur_year = this.year;\r\n            }\r\n\r\n            //自动确认\r\n            this.autoApply = options.autoApply || false;\r\n\r\n\r\n\r\n            this.buildHeader();\r\n            this.buildFooter();\r\n            this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);\r\n\r\n        },\r\n\r\n        monthsArr : function(year){\r\n            //如果当前年份能被4整除但是不能被100整除或者能被400整除，即可确定为闰年，返回1，否则返回0\r\n            var y = year % 4 == 0 ? (year % 100 != 0 ? 1 : (year % 400 == 0 ? 1 : 0) )  : 0;\r\n            return new Array(31, 28+y, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);\r\n        },\r\n\r\n        showCalendar : function(){\r\n            $('.datepicker-wrapper:visible').hide();\r\n            this.container.show();\r\n            $(document).off('click');\r\n            $(document).on('click',$.proxy(this.clickOutside,this));\r\n\r\n        },\r\n\r\n        hideCalendar : function(){\r\n            this.container.hide();\r\n            $(document).off('click');\r\n        },\r\n        applyCalendar : function(){\r\n            var year = this.cur_year;\r\n            var month = (this.cur_month+1).toString().length < 2 ? '0' + (this.cur_month+1) : this.cur_month+1;\r\n            var day = this.cur_day.toString().length < 2 ? '0' + this.cur_day : this.cur_day;\r\n\r\n            this.element.val(year+this.separator+month+this.separator+day);\r\n            this.hideCalendar();\r\n        },\r\n\r\n        cancelCalendar : function(){\r\n            this.hideCalendar();\r\n        },\r\n\r\n        clickOutside : function(e){\r\n            if($(e.target).closest(this.element).length || $(e.target).closest(this.container).length ){\r\n                return\r\n            }\r\n\r\n            this.container.hide();\r\n            $(document).off('click');\r\n        },\r\n\r\n        updateCalendar : function(y,m,d){\r\n            var canlendar = this.buildCalendar(y,m,d);\r\n\r\n            this.container.find('.picker').html(canlendar);\r\n            this.setPosition();\r\n            this.container.find('.picker td.available').on('click',$.proxy(this.selectDate,this));\r\n        },\r\n\r\n        setPosition :function(){\r\n            var top = this.element.offset().top + this.element.outerHeight() + 8;\r\n            var left = this.element.offset().left;\r\n\r\n            this.container.css({top:top,left:left});\r\n        },\r\n        selectDate : function(e){\r\n            e.stopPropagation();\r\n            this.cur_day = $(e.currentTarget).find('.canlendar_date').html();\r\n            this.container.find('.picker td').removeClass('active');\r\n            $(e.currentTarget).addClass('active');\r\n            if($(e.currentTarget).is('.other_next')){\r\n                this.monthNext();\r\n            }else if($(e.currentTarget).is('.other_prev')){\r\n                this.monthPrev();\r\n            }\r\n            if(this.autoApply){\r\n                this.applyCalendar();\r\n            }\r\n        },\r\n\r\n        disabledChangeBtn : function(){\r\n            //控制操作年份按钮可用性\r\n            var year_first_option = this.container.find('.year-group select option:first');\r\n            var year_last_option = this.container.find('.year-group select option:last');\r\n            var month_first_option = this.container.find('.month-group select option:first');\r\n            var month_last_option = this.container.find('.month-group select option:last');\r\n\r\n            this.container.find('.year-btn').attr('disabled',false);\r\n            if(year_first_option.prop('selected')){\r\n                this.container.find('.year-prev').attr('disabled',true);\r\n\r\n                //控制操作月份按钮可用性\r\n                if(month_first_option.prop('selected')){\r\n                    this.container.find('.month-prev').attr('disabled',true);\r\n                }else{\r\n                    this.container.find('.month-prev').attr('disabled',false);\r\n                }\r\n            }else if(year_last_option.prop('selected')){\r\n                this.container.find('.year-next').attr('disabled',true);\r\n\r\n                //控制操作月份按钮可用性\r\n                if(month_last_option.prop('selected')){\r\n                    this.container.find('.month-next').attr('disabled',true);\r\n                }else{\r\n                    this.container.find('.month-next').attr('disabled',false);\r\n                }\r\n            }\r\n        },\r\n\r\n        selectYear : function(){\r\n            this.cur_year = parseInt(this.container.find('.year-group select option:selected').html());\r\n            this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);\r\n            this.disabledChangeBtn();\r\n        },\r\n\r\n        yearPrev : function(){\r\n            if(this.container.find('.year-group select option:first').prop('selected')) return\r\n            this.container.find('.year-group select option:selected').prev().prop('selected',true);\r\n\r\n            //设置当前年份\r\n            this.cur_year  = parseInt(this.container.find('.year-group select option:selected').html());\r\n            this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);\r\n            this.disabledChangeBtn();\r\n        },\r\n\r\n        yearNext : function(){\r\n            if(this.container.find('.year-group select option:last').prop('selected')) return\r\n            this.container.find('.year-group select option:selected').next().prop('selected',true);\r\n\r\n            //设置当前年份\r\n            this.cur_year  = parseInt(this.container.find('.year-group select option:selected').html());\r\n            this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);\r\n            this.disabledChangeBtn();\r\n        },\r\n\r\n        selectMonth : function(){\r\n            this.cur_month = parseInt(this.container.find('.month-group select option:selected').html())-1;\r\n            this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);\r\n            this.disabledChangeBtn();\r\n        },\r\n\r\n        //上一月\r\n        monthPrev : function(){\r\n            if(this.container.find('.month-prev').attr('disabled')) return\r\n            var last_option = this.container.find('.month-group select option:last');\r\n            var cur_option = this.container.find('.month-group select option:selected');\r\n\r\n            if(cur_option.prev().length){\r\n                cur_option.prev().prop('selected',true);\r\n            }else{\r\n                last_option.prop('selected',true);\r\n                this.cur_year -= 1;\r\n                this.container.find('.year-group select option:selected').prev().prop('selected',true);\r\n            }\r\n\r\n            this.cur_month = parseInt(this.container.find('.month-group select option:selected').html())-1;\r\n            this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);\r\n            this.disabledChangeBtn();\r\n        },\r\n\r\n        //下一月\r\n        monthNext : function(){\r\n            if(this.container.find('.month-next').attr('disabled')) return\r\n\r\n            var first_option = this.container.find('.month-group select option:first');\r\n            var cur_option = this.container.find('.month-group select option:selected');\r\n\r\n            if(cur_option.next().length){\r\n                cur_option.next().prop('selected',true);\r\n            }else{\r\n                first_option.prop('selected',true);\r\n                this.cur_year += 1;\r\n                this.container.find('.year-group select option:selected').next().prop('selected',true);\r\n            }\r\n\r\n            this.cur_month = parseInt(this.container.find('.month-group select option:selected').html())-1;\r\n            this.updateCalendar(this.cur_year,this.cur_month,this.cur_day);\r\n            this.disabledChangeBtn();\r\n        },\r\n\r\n        //构建日历头部\r\n        buildHeader : function(){\r\n            var _html = '';\r\n\r\n            //年份选择器\r\n            var year_options = '';\r\n            for(var yops = (this.cur_year-10);yops < (this.cur_year+10);yops++){\r\n                year_options += (this.cur_year == yops ? '<option selected>'+yops+'年</option>' : '<option>'+yops+'年</option>');\r\n            }\r\n            var year_group = '<div class=\"check-group year-group\">' +\r\n                '<a href=\"javascript:;\" class=\"year-btn year-prev\">&lt;</a>' +\r\n                '<select>'+year_options+'</select>' +\r\n                '<a href=\"javascript:;\" class=\"year-btn year-next\">&gt;</a>' +\r\n                '</div>';\r\n\r\n            //月份选择器\r\n            var months_options = '';\r\n            var month = (this.cur_month+1) < 10 ? '0'+(this.cur_month+1) : (this.cur_month+1);\r\n            for(var mops = 1;mops <= 12;mops++){\r\n                months_options += (month == mops ? '<option selected>'+mops+'月</option>' : '<option>'+mops+'月</option>');\r\n            }\r\n\r\n            var months_group = '<div class=\"check-group month-group\">' +\r\n                '<a href=\"javascript:;\" class=\"month-btn month-prev\">&lt;</a>' +\r\n                '<select>'+months_options+'</select>' +\r\n                '<a href=\"javascript:;\" class=\"month-btn month-next\">&gt;</a>' +\r\n                '</div>';\r\n            _html += '<div class=\"ym-check\" >'+ year_group + months_group + '</div>';\r\n\r\n            this.container.find('.picker-header').append(_html);\r\n        },\r\n        buildFooter : function(){\r\n            var _html = '';\r\n            //确认，取消日历按钮\r\n            _html += '<div class=\"operate-btn\">';\r\n            _html += '<button class=\"cancel-btn\">取消</button>';\r\n            _html += '<button class=\"apply-btn\">确定</button>';\r\n            _html += '</div>';\r\n\r\n            this.container.find('.picker-footer').append(_html);\r\n        },\r\n        //构建日历表格\r\n        buildCalendar: function (year, month, day) {\r\n            var y = year,\r\n                m = month,\r\n                d = day,\r\n                firstday = new Date(y,m,1),\r\n                dayofweek = firstday.getDay(),\r\n                curMonth = this.monthsArr(this.cur_year);\r\n\r\n            var weeks =  ['日','一','二','三','四','五','六'];\r\n\r\n            //表格行数\r\n            var table_row = Math.ceil((dayofweek + curMonth[m])/7);\r\n            var _html = '<table><tr>';\r\n\r\n            //插入星期\r\n            for(var w = 0;w < weeks.length ;w++){\r\n                _html += '<td>'+ weeks[w] +'</td>';\r\n            }\r\n\r\n            _html += '</tr>';\r\n            for(var i = 0;i < table_row;i++){//第一层for循环创建tr标签\r\n                _html += '<tr>';\r\n                for(var k = 0;k < 7;k++){ //第二层for循环创建td标签\r\n                    var index = 7 * i + k;//为每个表格创建索引,从0开始\r\n                    var date = index - dayofweek + 1;//将当月的1号与星期进行匹配\r\n                    if(date < 1){//上月日期\r\n                        var pre_m = m == 0 ? 11 : m;\r\n                        _html += '<td class=\"available other other_prev\"><span class=\"canlendar_date\">'+ (curMonth[pre_m-1] + date) +'</span></td>';\r\n                    }else if(date > curMonth[m]) {//下月日期\r\n                        _html += '<td class=\"available other other_next\"><span class=\"canlendar_date\">' + ( date - curMonth[m]) + '</span></td>';\r\n                    }else if(date == this.day && this.month == m && this.year== y){//今天\r\n                        if(d == this.day){//今天与选中重叠\r\n                            _html += '<td class=\"available cur active\"><span class=\"canlendar_date\">'+date+'</span></td>';\r\n                        }else{\r\n                            _html += '<td class=\"available cur\"><span class=\"canlendar_date\">'+date+'</span></td>';\r\n                        }\r\n                    }else if(date == d){//当前选中\r\n                        if(d == this.day && this.month == m && this.year== y){//选中与今天重叠\r\n                            _html += '<td class=\"available cur active\"><span class=\"canlendar_date\">'+date+'</span></td>';\r\n                        }else{\r\n                            _html += '<td class=\"available active\"><span class=\"canlendar_date\">'+date+'</span></td>';\r\n                        }\r\n                    }else{//本月日期\r\n                        _html += '<td class=\"available\"><span class=\"canlendar_date\">'+date+'</span></td>';\r\n                    }\r\n                }\r\n                _html += '</tr>';\r\n            }\r\n\r\n            _html +='</table>';\r\n\r\n            return _html;\r\n        },\r\n    }\r\n\r\n    $.fn.datepicker = function(options,cb){\r\n        this.each(function(){\r\n            var el = $(this);\r\n            if(el.data('datepicker')){\r\n                el.data('datepicker').remove()\r\n            }\r\n            el.data('datepicker', new DatePicker(el, options, cb));\r\n        })\r\n        return this\r\n    }\r\n}($);\r\n\r\n"]}